<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2271px" height="1551px" viewBox="-0.5 -0.5 2271 1551" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 920 405 L 920 226.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 920 221.12 L 923.5 228.12 L 920 226.37 L 916.5 228.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 312px; margin-left: 920px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">(2)<br />reconciles<br /><br />(as it watches for new Brokers <br />with broker.class = MTChannelBasedBroker)</div></div></div></foreignObject><text x="920" y="316" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">(2)...</text></switch></g><path d="M 860 450 L 392.57 450 L 392.5 573.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 392.5 578.88 L 389 571.88 L 392.5 573.63 L 396 571.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 501px; margin-left: 393px;"><div data-drawio-colors="color: #000000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><font face="Helvetica">(3)<br />creates a channel, <br />based on the brokers </font>spec.config <br /><font face="Helvetica">and the </font>channel-template-spec</div></div></div></foreignObject><text x="393" y="504" fill="#000000" font-family="Courier New" font-size="12px" text-anchor="middle">(3)...</text></switch></g><path d="M 860 420 L 590 420 L 590 350 L 326.37 350" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 321.12 350 L 328.12 346.5 L 326.37 350 L 328.12 353.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 980 420 L 1240 420 L 1240 175 L 1146.37 175" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1141.12 175 L 1148.12 171.5 L 1146.37 175 L 1148.12 178.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 250px; margin-left: 1240px;"><div data-drawio-colors="color: #000000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">(5)<br />updates .status.address pointing <br />to mt-broker-ingress pods <br />path: http://broker-ingress..../&lt;broker-namespace&gt;/&lt;broker-name&gt;</div></div></div></foreignObject><text x="1240" y="254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">(5)...</text></switch></g><path d="M 980 435 L 1680 435 L 1680 306.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1680 301.12 L 1683.5 308.12 L 1680 306.37 L 1676.5 308.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 435px; margin-left: 1397px;"><div data-drawio-colors="color: #000000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">(7)<br />reconciles triggers associated <br />with brokers of the type it watches <br />(e.g. MTChannelBasedBroker brokers in this case)</div></div></div></foreignObject><text x="1397" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">(7)...</text></switch></g><path d="M 980 450 L 1190 450 L 1190 655 L 1393.63 655" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1398.88 655 L 1391.88 658.5 L 1393.63 655 L 1391.88 651.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 553px; margin-left: 1190px;"><div data-drawio-colors="color: #000000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><font face="Helvetica">(8)<br />creates subscription based on trigger spec.</font><br />spec.subscriber<font face="Helvetica"> points to the mt-broker-filter and </font><br />spec.channel<font face="Helvetica"> to the backing channel of the broker.<br /><br />As a trigger sends a cloudevent back to the broker<br />with the response to the subscriber, the </font>spec.reply.ref<font face="Helvetica"> <br />points to the broker.<br /></font></div></div></div></foreignObject><text x="1190" y="556" fill="#000000" font-family="Courier New" font-size="12px" text-anchor="middle">(8)...</text></switch></g><path d="M 1190 750 L 475 750 L 475 696.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475 691.12 L 478.5 698.12 L 475 696.37 L 471.5 698.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 750px; margin-left: 803px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">(9) reconciles subscriptions and<br style="font-size: 12px;" />adds it to the .spec.subscribers <br style="font-size: 12px;" />of the corresponding channel</div></div></div></foreignObject><text x="803" y="754" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">(9) reconciles subscriptions and...</text></switch></g><rect x="860" y="405" width="120" height="60" fill="#f8cecc" stroke="#b85450" stroke-width="3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 435px; margin-left: 861px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">mt-broker-controller</div></div></div></foreignObject><text x="920" y="439" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">mt-broker-controller</text></switch></g><path d="M 1290 40 L 920 40 L 920 123.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 920 128.88 L 916.5 121.88 L 920 123.63 L 923.5 121.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 40px; margin-left: 1060px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">(1)<br />creates</div></div></div></foreignObject><text x="1060" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">(1)...</text></switch></g><path d="M 1320 40 L 1680 40 L 1680 123.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1680 128.88 L 1676.5 121.88 L 1680 123.63 L 1683.5 121.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 40px; margin-left: 1546px;"><div data-drawio-colors="color: #000000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><font face="Helvetica">(6)<br />creates</font></div></div></div></foreignObject><text x="1546" y="44" fill="#000000" font-family="Courier New" font-size="12px" text-anchor="middle">(6)...</text></switch></g><ellipse cx="1305" cy="17.5" rx="7.500000000000001" ry="7.500000000000001" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 1305 25 L 1305 50 M 1305 30 L 1290 30 M 1305 30 L 1320 30 M 1305 50 L 1290 70 M 1305 50 L 1320 70" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 77px; margin-left: 1305px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">User</div></div></div></foreignObject><text x="1305" y="89" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">User</text></switch></g><rect x="700" y="130" width="440" height="90" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 438px; height: 1px; padding-top: 175px; margin-left: 702px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span class="nt" style="box-sizing: inherit; font-size: 12px;">apiVersion</span><span class="p" style="box-sizing: inherit; font-size: 12px;">:</span><span class="w" style="box-sizing: inherit; font-size: 12px;"> </span><span class="l l-Scalar l-Scalar-Plain" style="box-sizing: inherit; font-size: 12px;">eventing.knative.dev/v1</span><span style="font-size: 12px;"><br style="font-size: 12px;" /></span><span class="nt" style="box-sizing: inherit; font-size: 12px;">kind</span><span class="p" style="box-sizing: inherit; font-size: 12px;">:</span><span class="w" style="box-sizing: inherit; font-size: 12px;"> </span><span class="l l-Scalar l-Scalar-Plain" style="box-sizing: inherit; font-size: 12px;">Broker</span><span style="font-size: 12px;"><br style="font-size: 12px;" /></span><span class="nt" style="box-sizing: inherit; font-size: 12px;">metadata</span><span class="p" style="box-sizing: inherit; font-size: 12px;">:<br /></span><span style="font-size: 12px;">  name: my-broker<br style="font-size: 12px;" /></span><span class="w" style="box-sizing: inherit; font-size: 12px;"></span><span class="nt" style="box-sizing: inherit; font-size: 12px;">  annotations</span><span class="p" style="box-sizing: inherit; font-size: 12px;">:</span><span style="font-size: 12px;"><br style="font-size: 12px;" /></span><span class="w" style="box-sizing: inherit; font-size: 12px;"></span><span class="nt" style="box-sizing: inherit; font-size: 12px;">    <b>eventing.knative.dev/broker.class</b></span><b><span class="p" style="box-sizing: inherit; font-size: 12px;">:</span><span class="w" style="box-sizing: inherit; font-size: 12px;"> </span><span class="l l-Scalar l-Scalar-Plain" style="box-sizing: inherit; font-size: 12px;">MTChannelBasedBroker</span></b></div></div></div></foreignObject><text x="702" y="179" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">apiVersion: eventing.knative.dev/v1kind: Brokermetadata:...</text></switch></g><rect x="10" y="280" width="310" height="140" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 350px; margin-left: 12px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>apiVersion: v1</div><div>kind: ConfigMap</div><div>metadata:</div><div>  <b>name: config-br-default-channel</b></div><div>  namespace: knative-eventing</div><div>data:</div><div><b>  channel-template-spec: |</b></div><div><b>    apiVersion: messaging.knative.dev/v1</b></div><div style=""><b>    kind: InMemoryChannel</b></div></div></div></div></foreignObject><text x="12" y="354" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">apiVersion: v1...</text></switch></g><rect x="310" y="580" width="330" height="110" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 328px; height: 1px; padding-top: 635px; margin-left: 312px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>apiVersion: messaging.knative.dev/v1beta1</div><div>kind: InMemoryChannel</div><div>metadata:</div><div>  name: my-broker-&lt;suffix&gt;</div><div>status:</div><div>  address:</div><div>    url: http://my-broker-...</div></div></div></div></foreignObject><text x="312" y="639" fill="#000000" font-family="Courier New" font-size="12px">apiVersion: messaging.knative.dev/v1beta1...</text></switch></g><path d="M 860 635 L 646.37 635" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 641.12 635 L 648.12 631.5 L 646.37 635 L 648.12 638.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 635px; margin-left: 750px;"><div data-drawio-colors="color: #000000; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><font face="Helvetica">(4)<br />reconciles and set address <br />in </font>status.address.url <br /><font face="Helvetica">pointing to the real endpoint<br />of this channel<br /></font></div></div></div></foreignObject><text x="750" y="639" fill="#000000" font-family="Courier New" font-size="12px" text-anchor="middle">(4)...</text></switch></g><rect x="860" y="605" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 635px; margin-left: 861px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">imc-controller</div></div></div></foreignObject><text x="920" y="639" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">imc-controller</text></switch></g><path d="M 300 1000 L 375 1000 L 375 1170 L 443.63 1170" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 1170 L 441.88 1173.5 L 443.63 1170 L 441.88 1166.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="180" y="970" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1000px; margin-left: 181px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">mt-broker-ingress</div></div></div></foreignObject><text x="240" y="1004" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">mt-broker-ingress</text></switch></g><rect x="130" y="1030" width="220" height="70" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1065px; margin-left: 131px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Takes requests to /&lt;broker-namespace&gt;/&lt;broker-name&gt; and routes them to their associated channel address (endpoints in the data plane)</div></div></div></foreignObject><text x="240" y="1069" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Takes requests to /&lt;broker-namespace...</text></switch></g><path d="M 1830 215 L 1993.63 215" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1998.88 215 L 1991.88 218.5 L 1993.63 215 L 1991.88 211.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 215px; margin-left: 1916px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">references</div></div></div></foreignObject><text x="1916" y="218" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">references</text></switch></g><path d="M 1830 257.5 L 1960 257.57 L 1960 423.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1960 428.88 L 1956.5 421.88 L 1960 423.63 L 1963.5 421.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 312px; margin-left: 1960px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">references<br style="font-size: 12px;" />eventually <br style="font-size: 12px;" />(DLS is optional)</div></div></div></foreignObject><text x="1960" y="315" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">references...</text></switch></g><rect x="1530" y="130" width="300" height="170" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 215px; margin-left: 1531px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><font face="Courier New"><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">apiVersion</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">eventing.knative.dev/v1</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">kind</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">Trigger</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">metadata</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">  name</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">my-trigger</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">spec</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">  broker</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">my-broker</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">  subscriber</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">    ref</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">      apiVersion</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">serving.knative.dev/v1</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">      kind</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">Service</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">      name</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">my-service</span></font></div></div></div></div></foreignObject><text x="1680" y="219" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">apiVersion: eventing.knative.dev/v1kind: Triggerme...</text></switch></g><path d="M 1460 1000 L 2130 1000 L 2130 256.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2130 251.12 L 2133.5 258.12 L 2130 256.37 L 2126.5 258.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1000px; margin-left: 1767px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">forwards the filtered events to <br style="font-size: 12px;" />the user specified subscriber<br style="font-size: 12px;" />from the trigger API</div></div></div></foreignObject><text x="1767" y="1004" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">forwards the filtered events to...</text></switch></g><rect x="1340" y="970" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1000px; margin-left: 1341px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">mt-broker-filter</div></div></div></foreignObject><text x="1400" y="1004" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">mt-broker-filter</text></switch></g><rect x="1340" y="1050" width="220" height="100" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 218px; height: 1px; padding-top: 1100px; margin-left: 1342px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Takes requests to /triggers/&lt;trigger-namespace&gt;/&lt;trigger-name&gt;/&lt;uuid&gt; and:<br />- applies filtering (if any)<br />- send the cloudevent to the trigger subscriber</div></div></div></foreignObject><text x="1342" y="1104" fill="#000000" font-family="Helvetica" font-size="12px">Takes requests to /triggers/&lt;trigger...</text></switch></g><path d="M 1655 590 L 1655 465 L 1823.63 465" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1828.88 465 L 1821.88 468.5 L 1823.63 465 L 1821.88 461.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 513px; margin-left: 1655px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">references<br style="font-size: 12px;" />eventually</div></div></div></foreignObject><text x="1655" y="516" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">references...</text></switch></g><rect x="1400" y="590" width="510" height="260" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 508px; height: 1px; padding-top: 720px; margin-left: 1402px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>apiVersion: messaging.knative.dev/v1</div><div>kind: Subscription</div><div>metadata:</div><div>  name: my-broker-my-trigger-&lt;suffix&gt;</div><div>  namespace: default</div><div>spec:</div><div>  channel:</div><div>    apiVersion: messaging.knative.dev/v1</div><div>    kind: InMemoryChannel</div><div>    name: &lt;imc-name&gt;</div><div>  reply:</div><div>    ref:</div><div>      apiVersion: eventing.knative.dev/v1</div><div>      kind: Broker</div><div>      name: my-broker</div><div>      namespace: default</div><div>  subscriber:</div><div>    uri: http://broker-filter.../triggers/default/my-trigger/&lt;uuid&gt;</div></div></div></div></foreignObject><text x="1402" y="724" fill="#000000" font-family="Courier New" font-size="12px">apiVersion: messaging.knative.dev/v1...</text></switch></g><path d="M 60 920 L 2250 920" fill="none" stroke="#cccccc" stroke-width="4" stroke-miterlimit="10" stroke-dasharray="12 12" pointer-events="stroke"/><rect x="60" y="933" width="110" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 108px; height: 1px; padding-top: 948px; margin-left: 62px;"><div data-drawio-colors="color: #999999; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Data Plane</div></div></div></foreignObject><text x="62" y="954" fill="#999999" font-family="Helvetica" font-size="20px">Data Plane</text></switch></g><rect x="60" y="880" width="130" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 128px; height: 1px; padding-top: 895px; margin-left: 62px;"><div data-drawio-colors="color: #999999; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(153, 153, 153); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Control Plane</div></div></div></foreignObject><text x="62" y="901" fill="#999999" font-family="Helvetica" font-size="20px">Control Plane</text></switch></g><path d="M 1020 1170 L 1180 1170 L 1180 1000 L 1333.63 1000" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1338.88 1000 L 1331.88 1003.5 L 1333.63 1000 L 1331.88 996.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1020 1255 L 1960 1255 L 1960 1003 C 1963.9 1003 1963.9 997 1960 997 L 1960 997 L 1960 923 C 1963.9 923 1963.9 917 1960 917 L 1960 917 L 1960 506.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1960 501.12 L 1963.5 508.12 L 1960 506.37 L 1956.5 508.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1255px; margin-left: 1126px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">sends events on failure <br style="font-size: 12px;" />after configured retries</div></div></div></foreignObject><text x="1126" y="1259" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">sends events on failure...</text></switch></g><rect x="450" y="1000" width="570" height="340" fill="#e6e6e6" stroke="rgb(0, 0, 0)" stroke-dasharray="3 3" pointer-events="all"/><rect x="460" y="1013" width="170" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1028px; margin-left: 461px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Channel-specific data plane</div></div></div></foreignObject><text x="545" y="1032" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Channel-specific data plane</text></switch></g><rect x="960" y="1350" width="710" height="190" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 708px; height: 1px; padding-top: 1357px; margin-left: 962px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="overflow-wrap: break-word;">Delivery configs (DeadLetterSink, Retry, ...) are delegated to the channel implementation, so mt-broker-filter doesn't do retries because it might be restarted or upgraded in the middle of the retry sequence <span style="border-color: var(--border-color); background-color: initial;">and we want to leverage the channel persistent storage (if any) to keep track of event delivery </span><span style="border-color: var(--border-color); background-color: initial;">success or failures.</span><span style="background-color: initial;"><br /></span></div><div style="overflow-wrap: break-word;"><span style="border-color: var(--border-color); background-color: initial;"><br /></span></div><div style="overflow-wrap: break-word;"><span style="background-color: initial;">DeliverySpec configuration are present in Broker, Trigger, Channel, and Subscription APIs.</span></div><div style="overflow-wrap: break-word;"><span style="background-color: initial;"><br /></span></div><div style="overflow-wrap: break-word;"><span style="background-color: initial;">The channel-dispatcher watches all subscriptions for it's channel type. That way it is aware of the DeliverySpec for a the corresponding subscriber and of the mt-broker-filter URI to send events to.</span></div></div></div></div></foreignObject><text x="962" y="1369" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Delivery configs (DeadLetterSink, Retry, ...) are delegated to the channel implementation, so mt-broker-filter doesn't...</text></switch></g><path d="M 700 1435 C 700 1426.72 717.91 1420 740 1420 C 750.61 1420 760.78 1421.58 768.28 1424.39 C 775.79 1427.21 780 1431.02 780 1435 L 780 1495 C 780 1503.28 762.09 1510 740 1510 C 717.91 1510 700 1503.28 700 1495 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 780 1435 C 780 1443.28 762.09 1450 740 1450 C 717.91 1450 700 1443.28 700 1435" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1478px; margin-left: 701px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Kafka<br />Cluster</div></div></div></foreignObject><text x="740" y="1481" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Kafka...</text></switch></g><path d="M 665.03 1270 L 665 1465 L 693.63 1465" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 698.88 1465 L 691.88 1468.5 L 693.63 1465 L 691.88 1461.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1386px; margin-left: 665px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">receiver pushes <br style="font-size: 12px;" />events to Kafka</div></div></div></foreignObject><text x="665" y="1389" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">receiver pushes...</text></switch></g><path d="M 815.03 1270 L 815 1465 L 786.37 1465" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 781.12 1465 L 788.12 1461.5 L 786.37 1465 L 788.12 1468.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1386px; margin-left: 815px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">dispatcher pulls<br style="font-size: 12px;" />for events from Kafka</div></div></div></foreignObject><text x="815" y="1389" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dispatcher pulls...</text></switch></g><rect x="675" y="1070" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1100px; margin-left: 676px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">imc-dispatcher</div></div></div></foreignObject><text x="735" y="1104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">imc-dispatcher</text></switch></g><rect x="760" y="1210" width="110.05" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 1240px; margin-left: 761px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">kafka-channel-dispatcher</div></div></div></foreignObject><text x="815" y="1244" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">kafka-channel-disp...</text></switch></g><rect x="610" y="1210" width="110.05" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 1240px; margin-left: 611px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">kafka-channel-receiver</div></div></div></foreignObject><text x="665" y="1244" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">kafka-channel-rece...</text></switch></g><rect x="1830" y="430" width="260" height="70" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 465px; margin-left: 1831px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><font face="Courier New"><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">apiVersion</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">serving.knative.dev/v1</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">kind</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">Service</span></font><br style="border-color: var(--border-color);" /><span class="nt" style="border-color: var(--border-color); color: var(--md-code-hl-keyword-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">metadata</span><span class="p" style="border-color: var(--border-color); color: var(--md-code-hl-punctuation-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">:</span><span style="border-color: var(--border-color); font-family: &quot;Courier New&quot;; color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br style="border-color: var(--border-color);" /></span><span class="w" style="border-color: var(--border-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="border-color: var(--border-color); color: var(--md-code-hl-keyword-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">  name</span><span class="p" style="border-color: var(--border-color); color: var(--md-code-hl-punctuation-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">:</span><span class="w" style="border-color: var(--border-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><font face="Courier New"><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">my-dead-letter-sink</span></font></div></div></div></div></foreignObject><text x="1960" y="469" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">apiVersion: serving.knative.dev/v1kind: Ser...</text></switch></g><rect x="2000" y="180" width="260" height="70" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 215px; margin-left: 2001px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><font face="Courier New"><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">apiVersion</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">serving.knative.dev/v1</span><span style="color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br /></span><span class="nt" style="background-color: initial; color: var(--md-code-hl-keyword-color); box-sizing: inherit;">kind</span><span class="p" style="background-color: initial; color: var(--md-code-hl-punctuation-color); box-sizing: inherit;">:</span><span class="w" style="background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">Service</span></font><br style="border-color: var(--border-color);" /><span class="nt" style="border-color: var(--border-color); color: var(--md-code-hl-keyword-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">metadata</span><span class="p" style="border-color: var(--border-color); color: var(--md-code-hl-punctuation-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">:</span><span style="border-color: var(--border-color); font-family: &quot;Courier New&quot;; color: rgb(54, 70, 78); background-color: rgb(245, 245, 245);"><br style="border-color: var(--border-color);" /></span><span class="w" style="border-color: var(--border-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"></span><span class="nt" style="border-color: var(--border-color); color: var(--md-code-hl-keyword-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">  name</span><span class="p" style="border-color: var(--border-color); color: var(--md-code-hl-punctuation-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit;">:</span><span class="w" style="border-color: var(--border-color); font-family: &quot;Courier New&quot;; background-color: initial; box-sizing: inherit; color: rgb(54, 70, 78);"> </span><font face="Courier New"><span class="l l-Scalar l-Scalar-Plain" style="background-color: initial; color: var(--md-code-hl-string-color); box-sizing: inherit;">my-service</span></font></div></div></div></div></foreignObject><text x="2130" y="219" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">apiVersion: serving.knative.dev/v1kind: Ser...</text></switch></g><path d="M 1020 1085 L 1130 1085 L 1130 850 L 877.43 850 L 877.5 993.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 877.5 998.88 L 874 991.88 L 877.5 993.63 L 881 991.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 850px; margin-left: 1001px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">(10)<br style="font-size: 12px;" />reconciles its corresponding channel <br style="font-size: 12px;" />type resources and configures itself, <br style="font-size: 12px;" />so the dispatcher sends new events <br style="font-size: 12px;" />to the subscriptions subscriber<br style="font-size: 12px;" />(which points to the mt-broker-filter)</div></div></div></foreignObject><text x="1001" y="854" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">(10)...</text></switch></g><rect x="1190" y="720" width="130" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 750px; margin-left: 1191px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">subscription-controller<br />(in eventing controller)</div></div></div></foreignObject><text x="1255" y="754" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">subscription-controlle...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>